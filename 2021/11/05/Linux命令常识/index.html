<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"example.com","root":"/","scheme":"Mist","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":"gitment","storage":true,"lazyload":false,"nav":{"gitment":{"order":-1}}},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="docker https:&#x2F;&#x2F;www.zhihu.com&#x2F;question&#x2F;28300645&#x2F;answer&#x2F;585166942 https:&#x2F;&#x2F;www.zhihu.com&#x2F;question&#x2F;28300645&#x2F;answer&#x2F;2488146755   du disk usage http:&#x2F;&#x2F;c.biancheng.net&#x2F;linux&#x2F;du.html1234567891011121314151617">
<meta property="og:type" content="article">
<meta property="og:title" content="Linux-命令常识">
<meta property="og:url" content="http://example.com/2021/11/05/Linux%E5%91%BD%E4%BB%A4%E5%B8%B8%E8%AF%86/index.html">
<meta property="og:site_name" content="不落辰">
<meta property="og:description" content="docker https:&#x2F;&#x2F;www.zhihu.com&#x2F;question&#x2F;28300645&#x2F;answer&#x2F;585166942 https:&#x2F;&#x2F;www.zhihu.com&#x2F;question&#x2F;28300645&#x2F;answer&#x2F;2488146755   du disk usage http:&#x2F;&#x2F;c.biancheng.net&#x2F;linux&#x2F;du.html1234567891011121314151617">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://example.com/2021/11/05/Linux%E5%91%BD%E4%BB%A4%E5%B8%B8%E8%AF%86/2021-12-16-21-51-05.png">
<meta property="og:image" content="http://example.com/2021/11/05/Linux%E5%91%BD%E4%BB%A4%E5%B8%B8%E8%AF%86/2021-11-24-08-45-45.png">
<meta property="article:published_time" content="2021-11-05T12:38:45.000Z">
<meta property="article:modified_time" content="2021-11-06T11:49:00.000Z">
<meta property="article:author" content="Cstardust">
<meta property="article:tag" content="Linux">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/2021/11/05/Linux%E5%91%BD%E4%BB%A4%E5%B8%B8%E8%AF%86/2021-12-16-21-51-05.png">

<link rel="canonical" href="http://example.com/2021/11/05/Linux%E5%91%BD%E4%BB%A4%E5%B8%B8%E8%AF%86/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>Linux-命令常识 | 不落辰</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">不落辰</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">知不可乎骤得,托遗响于悲风</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
        <li class="menu-item menu-item-schedule">

    <a href="/schedule/" rel="section"><i class="fa fa-calendar fa-fw"></i>日程表</a>

  </li>
        <li class="menu-item menu-item-sitemap">

    <a href="/sitemap.xml" rel="section"><i class="fa fa-sitemap fa-fw"></i>站点地图</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/11/05/Linux%E5%91%BD%E4%BB%A4%E5%B8%B8%E8%AF%86/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Cstardust">
      <meta itemprop="description" content="小窝">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="不落辰">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Linux-命令常识
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-11-05 20:38:45" itemprop="dateCreated datePublished" datetime="2021-11-05T20:38:45+08:00">2021-11-05</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-11-06 19:49:00" itemprop="dateModified" datetime="2021-11-06T19:49:00+08:00">2021-11-06</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a>
                </span>
            </span>

          
            <span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv" style="display: none;">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span id="busuanzi_value_page_pv"></span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <ul>
<li><a target="_blank" rel="noopener" href="https://www.zhihu.com/question/28300645">docker</a><ul>
<li><a target="_blank" rel="noopener" href="https://www.zhihu.com/question/28300645/answer/585166942">https://www.zhihu.com/question/28300645/answer/585166942</a></li>
<li><a target="_blank" rel="noopener" href="https://www.zhihu.com/question/28300645/answer/2488146755">https://www.zhihu.com/question/28300645/answer/2488146755</a></li>
</ul>
</li>
<li>du disk usage<ul>
<li><a target="_blank" rel="noopener" href="http://c.biancheng.net/linux/du.html">http://c.biancheng.net/linux/du.html</a><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">为什么 du 和 ls 输出的值不同</span><br><span class="line">如果我告诉你说 du 和 ls 针对同一个文件，展示的大小是不一样的，你会不会很惊讶呢？</span><br><span class="line"></span><br><span class="line">下面我们就用一个活生生的例子，先把这个“奇观”给大家展示出来。</span><br><span class="line"><span class="comment">#有一个文件, 里面只输入了a、b两个英文字母</span></span><br><span class="line">[roc@roclinux ruanjian]$ cat myword</span><br><span class="line">ab</span><br><span class="line"> </span><br><span class="line"><span class="comment">#用下面的方法, 我们可以把文件中的控制字符也展示出来, 发现除了a、b外还包括了一个结尾符</span></span><br><span class="line">[roc@roclinux ruanjian]$ sed -n l myword</span><br><span class="line">ab$</span><br><span class="line"> </span><br><span class="line"><span class="comment">#用ls来查看大小, 发现展示的是3字节</span></span><br><span class="line">[roc@roclinux ruanjian]$ ls -l myword</span><br><span class="line">-rw-rw-r-- 1 roc roc 3 2月  18 15:53 myword</span><br><span class="line"> </span><br><span class="line"><span class="comment">#用du来查看大小, 竟然展示的是4KB字节</span></span><br><span class="line">[roc@roclinux ruanjian]$ du myword</span><br><span class="line">4       myword</span><br><span class="line"></span><br><span class="line">du 命令的作者也太粗心了吧，竟然连字母个数都数不清么？冤枉啊！其实，du 和 ls 在展示文件大小时，是存在着本质区别的：</span><br><span class="line">du 展示的是磁盘空间占用量。</span><br><span class="line">ls 展示的是文件内容的大小。</span><br><span class="line"></span><br><span class="line">可能这两句话还不足以让你理解两者的区别，我们举一个形象的例子。中秋节时，中国人走亲访友时都会购买月饼礼盒，月饼的体积可以认为是文件内容大小，而加上包装礼盒的总体积可以认为是磁盘空间使用量。</span><br><span class="line"></span><br><span class="line">那么，在 Linux 的世界里，每个文件也要有包装么？要想解答这个问题，我们就要简单介绍下 Linux 文件系统的原理了。文件系统进驻磁盘之初，就会将磁盘按照固定数据块（block）大小进行分隔切块，通常情况下每一个固定数据块大小会被设定为 4096bytes，也就是 4KB。</span><br><span class="line"></span><br><span class="line">与此同时，大部分文件系统规定：</span><br><span class="line">一个数据块中最多存放一个文件的内容，当没存满时，剩余的空间不得被其他文件使用。</span><br><span class="line">当一个文件的内容较大时，则可以存储到多个数据块中。</span><br><span class="line"></span><br><span class="line">讲到这里，相信你应该有所领悟了，正是因为这样的管理规则，使得 du 和 ls 在大小展示上出现了差异。</span><br><span class="line"></span><br><span class="line">我们再回过头来看一下刚才那个例子：</span><br><span class="line"><span class="comment">#有一个文件, 里面只输入了a、b两个英文字母</span></span><br><span class="line">[roc@roclinux ruanjian]$ cat myword</span><br><span class="line">ab</span><br><span class="line"> </span><br><span class="line"><span class="comment">#用这个方法, 我们可以把文件里的控制字符也展示出来, 发现除了a、b外还包括了一个结尾符。</span></span><br><span class="line">[roc@roclinux ruanjian]$ sed -n l myword</span><br><span class="line">ab$</span><br><span class="line"> </span><br><span class="line"><span class="comment">#用ls来查看大小, 发现展示的是3字节</span></span><br><span class="line">[roc@roclinux ruanjian]$ ls -l myword</span><br><span class="line">-rw-rw-r-- 1 roc roc 3 2月  18 15:53 myword</span><br><span class="line"> </span><br><span class="line"><span class="comment">#用du来查看大小, 发现竟然展示的是4KB</span></span><br><span class="line">[roc@roclinux ruanjian]$ du myword</span><br><span class="line">4       myword</span><br><span class="line"></span><br><span class="line">文件 myword 中只有三个字符，两个可见字符（ab）和一个控制字符（$），因此，这个文件的内容大小就是 3bytes，但是限于 Linux 文件系统的限制，它需要占用一个数据块来存储这个文件，因此这个文件实际占用的磁盘空间就是 4KB 了。</span><br><span class="line"></span><br><span class="line">这种情况使得 du 往往会比 ls 展示的文件大小要大一些。但是，还存在一种情况，那就是 du 展示的数值比 ls 展示的数值要小，这种现象，你知道原因么？</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<ul>
<li>unix时间戳<br><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/8ff0ec67e34b">https://www.jianshu.com/p/8ff0ec67e34b</a><br><a target="_blank" rel="noopener" href="https://cloud.tencent.com/developer/article/1021486?from=15425">https://cloud.tencent.com/developer/article/1021486?from=15425</a></li>
</ul>
<ul>
<li><p>查看内存</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># free -m</span></span><br><span class="line">                  total       used    free   shared   buffers    cached</span><br><span class="line">Mem:           725        666      59           0       132         287</span><br><span class="line">-/+ buffers/cache:     245     479</span><br><span class="line">Swap:           996            0     996</span><br><span class="line"></span><br><span class="line">第一行显示的是各个列的列表头信息，各自的含义如下所示：</span><br><span class="line">total 是总内存数；</span><br><span class="line">used 是已经使用的内存数；</span><br><span class="line">free 是空闲的内存数；</span><br><span class="line">shared 是多个进程共享的内存总数；</span><br><span class="line">buffers 是缓冲内存数；</span><br><span class="line">cached 是缓存内存数。</span><br><span class="line"></span><br><span class="line">Mem 一行指的是内存的使用情况；-/buffers/cache 的内存数，相当于第一行的 used-buffers-cached。+/buffers/cache 的内存数，相当于第一行的 free+buffers+cached；Swap 一行指的就是 swap 分区的使用情况。</span><br><span class="line"></span><br><span class="line">可以看到，系统的物理内存为 725 MB，已经使用了 666 MB，空闲 59 MB。而 swap 分区总大小为 996 MB，目前尚未使用。</span><br><span class="line">关注微信公众号「站长严长生」，在手机上阅读所有教程，随时随地都能学习。本公众号由C语言中文网站长运营，每日更新，坚持原创，敢说真话，凡事有态度。</span><br></pre></td></tr></table></figure></li>
<li><p>查看磁盘剩余空间</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">df</span><br><span class="line">df 以磁盘分区为单位查看文件系统，可以获取硬盘被占用了多少空间，目前还剩下多少空间等信息。</span><br><span class="line"></span><br><span class="line">例如，我们使用df -h命令来查看磁盘信息， -h 选项为根据大小适当显示：</span><br><span class="line"></span><br><span class="line">显示内容参数说明：</span><br><span class="line"></span><br><span class="line">Filesystem：文件系统</span><br><span class="line">Size： 分区大小</span><br><span class="line">Used： 已使用容量</span><br><span class="line">Avail： 还可以使用的容量</span><br><span class="line">Use%： 已用百分比</span><br><span class="line">Mounted on： 挂载点　</span><br><span class="line">相关命令：</span><br><span class="line"></span><br><span class="line">df -hl：查看磁盘剩余空间</span><br><span class="line">df -h：查看每个根路径的分区大小</span><br><span class="line">du -sh [目录名]：返回该目录的大小</span><br><span class="line">du -sm [文件夹]：返回该文件夹总M数</span><br><span class="line">du -h [目录名]：查看指定文件夹下的所有文件大小（包含子文件夹）</span><br></pre></td></tr></table></figure></li>
</ul>
<ul>
<li><a target="_blank" rel="noopener" href="https://cloud.tencent.com/developer/article/1404921">解压缩文件</a><ul>
<li><a target="_blank" rel="noopener" href="https://www.cnblogs.com/TheGCC/p/14228439.html">打包、压缩</a></li>
</ul>
</li>
</ul>
<ul>
<li><p><code>od -c 文件</code></p>
<ul>
<li><code>od</code> 观察文件实际内容</li>
<li><code>-c</code>以字符方式打印文件内容</li>
</ul>
</li>
<li><p><code>ln -s</code></p>
<ul>
<li><code>ln -s a b</code>：为a创建一个软连接b</li>
<li>创建软链接，又称<code>(symbolic link)</code>符号链接。建议采用绝对路径。</li>
<li><code>shc@shc-virtual-machine:~/code/revier$ ln -s test02.txt ./symbolic_link_test02</code></li>
</ul>
</li>
<li><p><code>ln</code> </p>
<ul>
<li>创建硬链接。</li>
<li><code>shc@shc-virtual-machine:~/code/revier$ ln test01.txt ./test01_hard</code></li>
</ul>
</li>
<li><p>sysctl</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://ipcmen.com/sysctl">https://ipcmen.com/sysctl</a></li>
</ul>
</li>
<li><p>manpage</p>
<ul>
<li><img src="/2021/11/05/Linux%E5%91%BD%E4%BB%A4%E5%B8%B8%E8%AF%86/2021-12-16-21-51-05.png"></li>
</ul>
</li>
<li><p>Byte b Mbps</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">B：Byte</span><br><span class="line">b：bit</span><br><span class="line">1GB = 1024 MB ; 1MB = 1024 KB = 1024 * 1024 B = 1024 * 1024 * 8 b</span><br><span class="line"></span><br><span class="line">Mbps：Million bits per second；</span><br><span class="line">Mbps=Mbit/s 即兆比特每秒</span><br><span class="line">b：bit而非Byte</span><br><span class="line">1 Mbps = 1024 Kbps = 1024 * 1024 bps</span><br><span class="line">= 128 KBps = 128 KB/s</span><br></pre></td></tr></table></figure></li>
</ul>
<hr>
<ul>
<li>setUID </li>
<li><a target="_blank" rel="noopener" href="https://blog.csdn.net/wxbmelisky/article/details/51649343">https://blog.csdn.net/wxbmelisky/article/details/51649343</a></li>
<li><a target="_blank" rel="noopener" href="https://www.cnblogs.com/bwangel23/p/4225818.html">https://www.cnblogs.com/bwangel23/p/4225818.html</a><br><img src="/2021/11/05/Linux%E5%91%BD%E4%BB%A4%E5%B8%B8%E8%AF%86/2021-11-24-08-45-45.png"><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">shc@shc-virtual-machine:/$ ll /etc/shadow</span><br><span class="line">-rw-r----- 1 root shadow 1366 11月  2 18:56 /etc/shadow</span><br><span class="line">shc@shc-virtual-machine:/$ ll /usr/bin/passwd </span><br><span class="line">-rwsr-xr-x 1 root root 59640 3月  23  2019 /usr/bin/passwd*</span><br></pre></td></tr></table></figure></li>
</ul>
<ul>
<li>文件夹大小 4096<br><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/6bf9d715ce2f">https://www.jianshu.com/p/6bf9d715ce2f</a></li>
</ul>
<hr>
<ul>
<li>进程状态 stat列<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">状态	定义</span><br><span class="line">R	Running.运行中</span><br><span class="line">S	Interruptible Sleep.等待调用</span><br><span class="line">D	Uninterruptible Sleep.等待磁盘IO</span><br><span class="line">T	Stoped.暂停或者跟踪状态</span><br><span class="line">X	Dead.即将被撤销</span><br><span class="line">Z	Zombie.进程已经结束，仅映像名留存，所谓的僵尸进程</span><br><span class="line">W	Paging.内存交换</span><br><span class="line">N	优先级低的进程</span><br><span class="line">&lt;	优先级高的进程</span><br><span class="line">s	进程的领导者</span><br><span class="line">L	锁定状态</span><br><span class="line">l	多线程状态</span><br><span class="line">+	前台进程</span><br><span class="line">而我们最常见的三种状态就是R，S，D。ps命令支持三种使用的语法格式：</span><br></pre></td></tr></table></figure></li>
</ul>
<p><a target="_blank" rel="noopener" href="http://blog.chinaunix.net/uid-20548989-id-2533161.html">struct timeval结构体以及gettimeofday函数</a></p>
<hr>
<ul>
<li>动态库常识<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><span class="line">linux下生成和使用动态库的步骤如下：</span><br><span class="line"></span><br><span class="line">1,编写源文件。</span><br><span class="line">2,将一个或几个源文件编译链接，生成共享库。</span><br><span class="line">3,通过 -L&lt;path&gt; -lxxx 的gcc选项链接生成的libxxx.so。</span><br><span class="line">4,把libxxx.so放入链接库的标准路径，或指定 LD_LIBRARY_PATH，才能运行链接了libxxx.so的程序。</span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">一， 生成动态库</span><br><span class="line"></span><br><span class="line">1）test.c文件</span><br><span class="line"></span><br><span class="line">#include &quot;test.h&quot;</span><br><span class="line"> </span><br><span class="line">void itoa(int *num)</span><br><span class="line">&#123;</span><br><span class="line">    if(*num&gt;=65&amp;&amp;*num&lt;=88)</span><br><span class="line">    &#123;</span><br><span class="line">        *num=*num - 65+&#x27;a&#x27;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">2）头文件</span><br><span class="line"></span><br><span class="line">#ifndef __ITOA_H_</span><br><span class="line">#define __ITOA_H_</span><br><span class="line"> </span><br><span class="line">extern void itoa(int *); </span><br><span class="line"> </span><br><span class="line">#endif</span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">二，编译生成动态库</span><br><span class="line"></span><br><span class="line">gcc test.c  -fPIC -shared -o libtest.so</span><br><span class="line"></span><br><span class="line">-o 参数指定生成libtest.so ;此为动态库，Linux下格式为libxxx.so ；xxx 是后面你要调用的库名</span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">三，使用动态库</span><br><span class="line"></span><br><span class="line">1）自己写个测试main.c  用来测试库中的函数</span><br><span class="line"> </span><br><span class="line">2）使用gcc main.c -L. -ltest 生成a.out</span><br><span class="line"></span><br><span class="line">-L. ：-L参数是指定库的位置，注意此处有个&#x27;.&#x27; 表示当前路径</span><br><span class="line"></span><br><span class="line">-l ：其中-ltest表示要链接libtest.so   </span><br><span class="line"></span><br><span class="line">四，运行</span><br><span class="line"></span><br><span class="line">1）运行 ./a.out 会得到以下的错误提示。</span><br><span class="line"></span><br><span class="line">./a.out: error while loading shared libraries: libtest.so: cannot open shared object file: No such file or directory</span><br><span class="line"></span><br><span class="line">提示：找不到libtest.so。</span><br><span class="line"></span><br><span class="line">2）找不到库的原因</span><br><span class="line"></span><br><span class="line">Linux是通过 /etc/ld.so.cache 文件搜寻要链接的动态库的。</span><br><span class="line"></span><br><span class="line">而 /etc/ld.so.cache 是 ldconfig 程序读取 /etc/ld.so.conf 文件生成的。</span><br><span class="line">（注意， /etc/ld.so.conf 中并不必包含 /lib 和 /usr/lib，ldconfig程序会自动搜索这两个目录）</span><br><span class="line"></span><br><span class="line">所以把 libtest.so 所在的路径添加到 /etc/ld.so.conf 中</span><br><span class="line"></span><br><span class="line">再以root权限运行 ldconfig 程序更新ld.so.cache</span><br><span class="line"></span><br><span class="line">a.out运行时，就可以找到 libtest.so。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">3）使用临时解决的方法</span><br><span class="line"></span><br><span class="line">但作为一个简单的测试例子，让我们改动系统的东西，似乎不太合适。</span><br><span class="line"></span><br><span class="line">还有另一种简单的方法，就是为a.out指定 LD_LIBRARY_PATH。</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">LD_LIBRARY_PATH=../a.out    或者  export LD_LIBRARY_PATH=.  再执行./a.out</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">程序就能正常运行了。LD_LIBRARY_PATH=. 是告诉 a.out，先在当前路径寻找链接的动态库。</span><br><span class="line">————————————————</span><br><span class="line">版权声明：本文为CSDN博主「___Eirc」的原创文章，遵循CC 4.0 BY-SA版权协议，转载请附上原文出处链接及本声明。</span><br><span class="line">原文链接：https://blog.csdn.net/u013625451/article/details/78856127</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ul>
<ul>
<li>文件类型<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">Linux文件类型说明</span><br><span class="line">文件类型	说明</span><br><span class="line">b	块设备，是一些提供系统存取数据的接口设备，例如硬盘。</span><br><span class="line">c	字符设备，是一些串行端口的接口设备，例如键盘、鼠标、打印机、tty终端。</span><br><span class="line">d	目录，类似于Windows的文件夹。</span><br><span class="line">l	链接文件，类似于Windows的快捷方式。</span><br><span class="line">s	套接字文件（socket），用于进程之间的通信。</span><br><span class="line">-	文件，分纯文本文件（ASCII）和二进制文件（binary）。</span><br><span class="line">命令	说明</span><br><span class="line">file filename	查看文件类型</span><br><span class="line">————————————————</span><br><span class="line">版权声明：本文为CSDN博主「逍遥X」的原创文章，遵循CC 4.0 BY-SA版权协议，转载请附上原文出处链接及本声明。</span><br><span class="line">原文链接：https://blog.csdn.net/renfeigui0/article/details/99478291</span><br></pre></td></tr></table></figure></li>
</ul>
<hr>
<ul>
<li>netstat</li>
</ul>
<p>Netstat 简介<br>Netstat 是一款命令行工具，可用于列出系统上所有的网络套接字连接情况，包括 tcp, udp 以及 unix 套接字，另外它还能列出处于监听状态（即等待接入请求）的套接字。如果你想确认系统上的 Web 服务有没有起来，你可以查看80端口有没有打开。以上功能使 netstat 成为网管和系统管理员的必备利器。在这篇教程中，我会列出几个例子，教大家如何使用 netstat 去查找网络连接信息和系统开启的端口号。</p>
<p>以下的简单介绍来自 netstat 的 man 手册：</p>
<p>netstat - 打印网络连接、路由表、连接的数据统计、伪装连接以及广播域成员。</p>
<ol>
<li>列出所有连接<br>第一个要介绍的，是最简单的命令：列出所有当前的连接。使用 -a 选项即可。</li>
</ol>
<p>$ netstat -a</p>
<p>Active Internet connections (servers and established)<br>Proto Recv-Q Send-Q Local Address           Foreign Address         State<br>tcp        0      0 enlightened:domain      <em>:</em>                     LISTEN<br>tcp        0      0 localhost:ipp           <em>:</em>                     LISTEN<br>tcp        0      0 enlightened.local:54750 li240-5.members.li:http ESTABLISHED<br>tcp        0      0 enlightened.local:49980 del01s07-in-f14.1:https ESTABLISHED<br>tcp6       0      0 ip6-localhost:ipp       [::]:*                  LISTEN<br>udp        0      0 enlightened:domain      <em>:</em><br>udp        0      0 <em>:bootpc                <em>:</em><br>udp        0      0 enlightened.local:ntp   <em>:</em><br>udp        0      0 localhost:ntp           <em>:</em><br>udp        0      0 <em>:ntp                   <em>:</em><br>udp        0      0 <em>:58570                 <em>:</em><br>udp        0      0 <em>:mdns                  <em>:</em><br>udp        0      0 <em>:49459                 <em>:</em><br>udp6       0      0 fe80::216:36ff:fef8:ntp [::]:</em><br>udp6       0      0 ip6-localhost:ntp       [::]:</em><br>udp6       0      0 [::]:ntp                [::]:</em><br>udp6       0      0 [::]:mdns               [::]:</em><br>udp6       0      0 [::]:63811              [::]:</em><br>udp6       0      0 [::]:54952              [::]:*<br>Active UNIX domain sockets (servers and established)<br>Proto RefCnt Flags       Type       State         I-Node   Path<br>unix  2      [ ACC ]     STREAM     LISTENING     12403    @/tmp/dbus-IDgfj3UGXX<br>unix  2      [ ACC ]     STREAM     LISTENING     40202    @/dbus-vfs-daemon/socket-6nUC6CCx<br>上述命令列出 tcp, udp 和 unix 协议下所有套接字的所有连接。然而这些信息还不够详细，管理员往往需要查看某个协议或端口的具体连接情况。</p>
<ol start="2">
<li>只列出 TCP 或 UDP 协议的连接<br>使用 -t 选项列出 TCP 协议的连接：</li>
</ol>
<p>$ netstat -at<br>Active Internet connections (servers and established)<br>Proto Recv-Q Send-Q Local Address           Foreign Address         State<br>tcp        0      0 enlightened:domain      <em>:</em>                     LISTEN<br>tcp        0      0 localhost:ipp           <em>:</em>                     LISTEN<br>tcp        0      0 enlightened.local:36310 del01s07-in-f24.1:https ESTABLISHED<br>tcp        0      0 enlightened.local:45038 a96-17-181-10.depl:http ESTABLISHED<br>tcp        0      0 enlightened.local:37892 ABTS-North-Static-:http ESTABLISHED<br>…..<br>使用 -u 选项列出 UDP 协议的连接：</p>
<p>$ netstat -au<br>Active Internet connections (servers and established)<br>Proto Recv-Q Send-Q Local Address           Foreign Address         State<br>udp        0      0 <em>:34660                 <em>:</em><br>udp        0      0 enlightened:domain      <em>:</em><br>udp        0      0 <em>:bootpc                <em>:</em><br>udp        0      0 enlightened.local:ntp   <em>:</em><br>udp        0      0 localhost:ntp           <em>:</em><br>udp        0      0 <em>:ntp                   <em>:</em><br>udp6       0      0 fe80::216:36ff:fef8:ntp [::]:</em><br>udp6       0      0 ip6-localhost:ntp       [::]:</em><br>udp6       0      0 [::]:ntp                [::]:</em><br>上面同时显示了 IPv4 和 IPv6 的连接。</p>
<ol start="3">
<li>禁用反向域名解析，加快查询速度<br>默认情况下 netstat 会通过反向域名解析技术查找每个 IP 地址对应的主机名。这会降低查找速度。如果你觉得 IP 地址已经足够，而没有必要知道主机名，就使用 -n 选项禁用域名解析功能。</li>
</ol>
<p>$ netstat -ant<br>Active Internet connections (servers and established)<br>Proto Recv-Q Send-Q Local Address           Foreign Address         State<br>tcp        0      0 127.0.1.1:53            0.0.0.0:*               LISTEN<br>tcp        0      0 127.0.0.1:631           0.0.0.0:*               LISTEN<br>tcp        0      0 192.168.1.2:49058       173.255.230.5:80        ESTABLISHED<br>tcp        0      0 192.168.1.2:33324       173.194.36.117:443      ESTABLISHED<br>tcp6       0      0 ::1:631                 :::*                    LISTEN<br>上述命令列出所有 TCP 协议的连接，没有使用域名解析技术。So easy ? 非常好。</p>
<ol start="4">
<li>只列出监听中的连接<br>任何网络服务的后台进程都会打开一个端口，用于监听接入的请求。这些正在监听的套接字也和连接的套接字一样，也能被 netstat 列出来。使用 -l 选项列出正在监听的套接字。</li>
</ol>
<p>$ netstat -tnl<br>Active Internet connections (only servers)<br>Proto Recv-Q Send-Q Local Address           Foreign Address         State<br>tcp        0      0 127.0.1.1:53            0.0.0.0:*               LISTEN<br>tcp        0      0 127.0.0.1:631           0.0.0.0:*               LISTEN<br>tcp6       0      0 ::1:631                 :::*                    LISTEN<br>现在我们可以看到处于监听状态的 TCP 端口和连接。如果你查看所有监听端口，去掉 -t 选项。如果你只想查看 UDP 端口，使用 -u 选项，代替 -t 选项。</p>
<p>注意：不要使用 -a 选项，否则 netstat 会列出所有连接，而不仅仅是监听端口。</p>
<ol start="5">
<li>获取进程名、进程号以及用户 ID<br>查看端口和连接的信息时，能查看到它们对应的进程名和进程号对系统管理员来说是非常有帮助的。举个栗子，Apache 的 httpd 服务开启80端口，如果你要查看 http 服务是否已经启动，或者 http 服务是由 apache 还是 nginx 启动的，这时候你可以看看进程名。</li>
</ol>
<p>使用 -p 选项查看进程信息。</p>
<p>~$ sudo netstat -nlpt<br>Active Internet connections (only servers)<br>Proto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program name<br>tcp        0      0 127.0.1.1:53            0.0.0.0:*               LISTEN      1144/dnsmasq<br>tcp        0      0 127.0.0.1:631           0.0.0.0:*               LISTEN      661/cupsd<br>tcp6       0      0 ::1:631                 :::*                    LISTEN      661/cupsd<br>使用 -p 选项时，netstat 必须运行在 root 权限之下，不然它就不能得到运行在 root 权限下的进程名，而很多服务包括 http 和 ftp 都运行在 root 权限之下。</p>
<p>相比进程名和进程号而言，查看进程的拥有者会更有用。使用 -ep 选项可以同时查看进程名和用户名。</p>
<p>$ sudo netstat -ltpe<br>Active Internet connections (only servers)<br>Proto Recv-Q Send-Q Local Address           Foreign Address         State       User       Inode       PID/Program name<br>tcp        0      0 enlightened:domain      <em>:</em>                     LISTEN      root       11090       1144/dnsmasq<br>tcp        0      0 localhost:ipp           <em>:</em>                     LISTEN      root       9755        661/cupsd<br>tcp6       0      0 ip6-localhost:ipp       [::]:*                  LISTEN      root       9754        661/cupsd<br>上面列出 TCP 协议下的监听套接字，同时显示进程信息和一些额外信息。</p>
<p>这些额外的信息包括用户名和进程的索引节点号。这个命令对网管来说很有用。</p>
<p>注意 - 假如你将 -n 和 -e 选项一起使用，User 列的属性就是用户的 ID 号，而不是用户名。</p>
<ol start="6">
<li>打印统计数据<br>netstat 可以打印出网络统计数据，包括某个协议下的收发包数量。</li>
</ol>
<p>下面列出所有网络包的统计情况：</p>
<p>$ netstat -s<br>Ip:<br>    32797 total packets received<br>    0 forwarded<br>    0 incoming packets discarded<br>    32795 incoming packets delivered<br>    29115 requests sent out<br>    60 outgoing packets dropped<br>Icmp:<br>    125 ICMP messages received<br>    0 input ICMP message failed.<br>    ICMP input histogram:<br>        destination unreachable: 125<br>    125 ICMP messages sent<br>    0 ICMP messages failed<br>    ICMP output histogram:<br>        destination unreachable: 125<br>… OUTPUT TRUNCATED …<br>如果想只打印出 TCP 或 UDP 协议的统计数据，只要加上对应的选项（-t 和 -u）即可，so easy。</p>
<ol start="7">
<li>显示内核路由信息<br>使用 -r 选项打印内核路由信息。打印出来的信息与 route 命令输出的信息一样。我们也可以使用 -n 选项禁止域名解析。</li>
</ol>
<p>$ netstat -rn<br>Kernel IP routing table<br>Destination     Gateway         Genmask         Flags   MSS Window  irtt Iface<br>0.0.0.0         192.168.1.1     0.0.0.0         UG        0 0          0 eth0<br>192.168.1.0     0.0.0.0         255.255.255.0   U         0 0          0 eth0<br>8. 打印网络接口<br>netstat 也能打印网络接口信息，-i 选项就是为这个功能而生。</p>
<p>$ netstat -i<br>Kernel Interface table<br>Iface   MTU Met   RX-OK RX-ERR RX-DRP RX-OVR    TX-OK TX-ERR TX-DRP TX-OVR Flg<br>eth0       1500 0     31611      0      0 0         27503      0      0      0 BMRU<br>lo        65536 0      2913      0      0 0          2913      0      0      0 LRU<br>上面输出的信息比较原始。我们将 -e 选项和 -i 选项搭配使用，可以输出用户友好的信息。</p>
<p>$ netstat -ie<br>Kernel Interface table<br>eth0      Link encap:Ethernet  HWaddr 00:16:36:f8:b2:64<br>          inet addr:192.168.1.2  Bcast:192.168.1.255  Mask:255.255.255.0<br>          inet6 addr: fe80::216:36ff:fef8:b264/64 Scope:Link<br>          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1<br>          RX packets:31682 errors:0 dropped:0 overruns:0 frame:0<br>          TX packets:27573 errors:0 dropped:0 overruns:0 carrier:0<br>          collisions:0 txqueuelen:1000<br>          RX bytes:29637117 (29.6 MB)  TX bytes:4590583 (4.5 MB)<br>          Interrupt:18 Memory:da000000-da020000 </p>
<p>lo        Link encap:Local Loopback<br>          inet addr:127.0.0.1  Mask:255.0.0.0<br>          inet6 addr: ::1/128 Scope:Host<br>          UP LOOPBACK RUNNING  MTU:65536  Metric:1<br>          RX packets:2921 errors:0 dropped:0 overruns:0 frame:0<br>          TX packets:2921 errors:0 dropped:0 overruns:0 carrier:0<br>          collisions:0 txqueuelen:0<br>          RX bytes:305297 (305.2 KB)  TX bytes:305297 (305.2 KB)<br>上面的输出信息与 ifconfig 输出的信息一样。</p>
<ol start="9">
<li>netstat 持续输出<br>我们可以使用 netstat 的 -c 选项持续输出信息。</li>
</ol>
<p>$ netstat -ct<br>这个命令可持续输出 TCP 协议信息。</p>
<ol start="10">
<li>显示多播组信息<br>选项 -g 会输出 IPv4 和 IPv6 的多播组信息。</li>
</ol>
<p>$ netstat -g<br>IPv6/IPv4 Group Memberships<br>Interface       RefCnt Group</p>
<hr>
<p>lo              1      all-systems.mcast.net<br>eth0            1      224.0.0.251<br>eth0            1      all-systems.mcast.net<br>lo              1      ip6-allnodes<br>lo              1      ff01::1<br>eth0            1      ff02::fb<br>eth0            1      ff02::1:fff8:b264<br>eth0            1      ip6-allnodes<br>eth0            1      ff01::1<br>wlan0           1      ip6-allnodes<br>wlan0           1      ff01::1<br>更多用法<br>目前为止我们列出了 netstat 的基本用法，现在让我们一起来 geek 吧～</p>
<p>打印 active 状态的连接<br>active 状态的套接字连接用 “ESTABLISHED” 字段表示，所以我们可以使用 grep 命令获得 active 状态的连接：</p>
<p>$ netstat -atnp | grep ESTA<br>(Not all processes could be identified, non-owned process info<br> will not be shown, you would have to be root to see it all.)<br>tcp        0      0 192.168.1.2:49156       173.255.230.5:80        ESTABLISHED 1691/chrome<br>tcp        0      0 192.168.1.2:33324       173.194.36.117:443      ESTABLISHED 1691/chrome<br>配合 watch 命令监视 active 状态的连接：</p>
<p>$ watch -d -n0 “netstat -atnp | grep ESTA”<br>查看服务是否在运行<br>如果你想看看 http,smtp 或 ntp 服务是否在运行，使用 grep。</p>
<p>$ sudo netstat -aple | grep ntp<br>udp        0      0 enlightened.local:ntp   <em>:</em>                                 root       17430       1789/ntpd<br>udp        0      0 localhost:ntp           <em>:</em>                                 root       17429       1789/ntpd<br>udp        0      0 <em>:ntp                   <em>:</em>                                 root       17422       1789/ntpd<br>udp6       0      0 fe80::216:36ff:fef8:ntp [::]:</em>                              root       17432       1789/ntpd<br>udp6       0      0 ip6-localhost:ntp       [::]:*                              root       17431       1789/ntpd<br>udp6       0      0 [::]:ntp                [::]:*                              root       17423       1789/ntpd<br>unix  2      [ ]         DGRAM                    17418    1789/ntpd<br>从这里可以看到 ntp 服务正在运行。使用 grep 命令你可以查看 http 或 smtp 或其它任何你想查看的服务。</p>
<p>好了，netstat 的大部分功能都介绍过了，如果你想知道 netstat 更高级的功能，阅读它的手册吧（man netstat）。</p>
<p>欢迎在下面留下你的反馈和建议。</p>
<p><a target="_blank" rel="noopener" href="https://linux.cn/article-2434-1.html">https://linux.cn/article-2434-1.html</a></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">激活Internet连接 (服务器和已建立连接的)</span><br><span class="line">Proto Recv-Q Send-Q Local Address           Foreign Address         State      </span><br><span class="line">tcp        0      0 localhost:domain        0.0.0.0:*               LISTEN     </span><br><span class="line">tcp        0      0 localhost:ipp           0.0.0.0:*               LISTEN     </span><br><span class="line">tcp6       0      0 ip6-localhost:ipp       [::]:*                  LISTEN     </span><br><span class="line">udp        0      0 0.0.0.0:mdns            0.0.0.0:*                          </span><br><span class="line">udp        0      0 localhost:domain        0.0.0.0:*                          </span><br><span class="line">udp        0      0 0.0.0.0:bootpc          0.0.0.0:*                          </span><br><span class="line">udp        0      0 0.0.0.0:ipp             0.0.0.0:*                          </span><br><span class="line">udp        0      0 0.0.0.0:60427           0.0.0.0:*                          </span><br><span class="line">udp6       0      0 [::]:mdns               [::]:*                             </span><br><span class="line">udp6       0      0 [::]:42160              [::]:*                             </span><br><span class="line">raw6       0      0 [::]:ipv6-icmp          [::]:*                  7          </span><br><span class="line">活跃的UNIX域套接字 (服务器和已建立连接的)</span><br><span class="line">Proto RefCnt Flags       Type       State         I-Node   路径</span><br><span class="line">unix  2      [ ACC ]     流        LISTENING     53732    @/tmp/.ICE-unix/1652</span><br><span class="line">unix  2      [ ]         数据报                52832    /run/user/1000/systemd/notify</span><br><span class="line">unix  2      [ ]         数据报                46115    /run/user/121/systemd/notify</span><br><span class="line">unix  2      [ ACC ]     SEQPACKET  LISTENING     25942    /run/udev/control</span><br><span class="line">unix  2      [ ACC ]     流        LISTENING     55388    @/tmp/dbus-Y8PWhluE</span><br><span class="line">unix  2      [ ACC ]     流        LISTENING     52835    /run/user/1000/systemd/private</span><br><span class="line">unix  2      [ ACC ]     流        LISTENING     46118    /run/user/121/systemd/priva</span><br></pre></td></tr></table></figure>


<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">shc@shc-virtual-machine:~$ netstat -t</span><br><span class="line">激活Internet连接 (w/o 服务器)</span><br><span class="line">Proto Recv-Q Send-Q Local Address           Foreign Address         State      </span><br><span class="line">shc@shc-virtual-machine:~$ netstat -at</span><br><span class="line">激活Internet连接 (服务器和已建立连接的)</span><br><span class="line">Proto Recv-Q Send-Q Local Address           Foreign Address         State      </span><br><span class="line">tcp        0      0 localhost:domain        0.0.0.0:*               LISTEN     </span><br><span class="line">tcp        0      0 localhost:ipp           0.0.0.0:*               LISTEN     </span><br><span class="line">tcp6       0      0 ip6-localhost:ipp       [::]:*                  LISTEN     </span><br><span class="line">shc@shc-virtual-machine:~$ netstat -atn</span><br><span class="line">激活Internet连接 (服务器和已建立连接的)</span><br><span class="line">Proto Recv-Q Send-Q Local Address           Foreign Address         State      </span><br><span class="line">tcp        0      0 127.0.0.53:53           0.0.0.0:*               LISTEN     </span><br><span class="line">tcp        0      0 127.0.0.1:631           0.0.0.0:*               LISTEN     </span><br><span class="line">tcp6       0      0 ::1:631                 :::*                    LISTEN     </span><br><span class="line"></span><br></pre></td></tr></table></figure>


<ul>
<li><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/943b90150c10">Linux ps命令</a><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br></pre></td><td class="code"><pre><span class="line">Linux-ps命令学习</span><br><span class="line"></span><br><span class="line">骑着乌龟去看海</span><br><span class="line">0.73</span><br><span class="line">2018.05.27 21:00:19</span><br><span class="line">字数 2,117</span><br><span class="line">阅读 9,216</span><br><span class="line">由于ps命令涉及的内容比较多一些，这里单独使用一篇文章来介绍使用。使用的系统是：CentOS 7.4.17.08。</span><br><span class="line"></span><br><span class="line">  ps命令是Process Status的缩写，用来列出系统中当前运行的进程。使用该命令可以确定有哪些进程正在运行和运行的状态、进程是否结束、进程有没有僵死、哪些进程占用了过多的资源等等。ps命令所列出的进行是当前进程的快照，也就是并不是动态的，而是执行该命令时那一时刻进行的状态。而经常和ps一起结合使用的杀死进程的是kill命令。</span><br><span class="line">  在我们的学习中我们知道，Linux的进程状态一般分为几种：</span><br><span class="line"></span><br><span class="line">R(TASK_RUNNING，可执行状态)，这个进程是可运行的——要么它正在运行，要么在运行队列中等待运行；</span><br><span class="line">S(TASK_INTERRUPTIBLE，中断状态)，这个状态的进程因为等待某事件的发生（比如等待socket连接、等待信号量等）而被挂起，然后当这些事件发生或完成后，对应的等待队列中的一个或多个进程将被唤醒。</span><br><span class="line">D(TASK_UNINTERRUPTIBLE，不可中断状态)，在进程接收到信号时，不会被唤醒变成可运行的。除了这一点，该状态和TASK_INTERRUPTIBLE其他部分完全一样，这个状态通常用于进程必须不间断等待或者事件发生的频率很快，并且无法用kill命令关闭处于TASK_UNINTERRUPTIBLE状态的进程。</span><br><span class="line">T(TASK_STOPPED或TASK_TRACED，暂停状态或跟踪状态)，该状态表示该进程已经停止执行，并且不具有再次执行的条件。向进程发送一个SIGSTOP信号，它就会因响应该信号而进入TASK_STOPPED状态（除非该进程本身处于TASK_UNINTERRUPTIBLE状态而不响应信号）。而当进程正在被跟踪时，它处于TASK_TRACED状态。</span><br><span class="line">Z(TASK_DEAD或EXIT_ZOMBIE，退出状态)，进程在退出的过程中，处于TASK_DEAD状态，如果它的父进程没有收到SIGCHLD信号，故未调用wait（如wait4、waitid）处理函数等待子进程结束，又没有显式忽略该信号，它就一直保持EXIT_ZOMBIE状态。只要父进程不退出，这个EXIT_ZOMBIE状态的子进程就一直存在，这也就是所谓的&quot;僵尸&quot;进程。</span><br><span class="line">X(TASK_DEAD - EXIT_DEAD，退出状态)，进程即将被销毁。EXIT_DEAD状态是非常短暂的，几乎不可能通过ps命令捕捉到。</span><br><span class="line">而PS对应上的状态码大致如下：</span><br><span class="line"></span><br><span class="line">状态	定义</span><br><span class="line">R	Running.运行中</span><br><span class="line">S	Interruptible Sleep.等待调用</span><br><span class="line">D	Uninterruptible Sleep.等待磁盘IO</span><br><span class="line">T	Stoped.暂停或者跟踪状态</span><br><span class="line">X	Dead.即将被撤销</span><br><span class="line">Z	Zombie.进程已经结束，仅映像名留存，所谓的僵尸进程</span><br><span class="line">W	Paging.内存交换</span><br><span class="line">N	优先级低的进程</span><br><span class="line">&lt;	优先级高的进程</span><br><span class="line">s	进程的领导者</span><br><span class="line">L	锁定状态</span><br><span class="line">l	多线程状态</span><br><span class="line">+	前台进程</span><br><span class="line">而我们最常见的三种状态就是R，S，D。ps命令支持三种使用的语法格式：</span><br><span class="line"></span><br><span class="line">UNIX 风格，选项可以组合在一起，并且选项前必须有“-”连字符；</span><br><span class="line">BSD 风格，选项可以组合在一起，但是选项前不能有“-”连字符；</span><br><span class="line">GNU 风格的选项，选项前有两个“-”连字符；</span><br><span class="line">接下来我们来看一下PS命令常用的参数：</span><br><span class="line"></span><br><span class="line">ps -a  显示所有终端下执行的进程，包含其他用户的进程</span><br><span class="line">ps -A  显示所有进程</span><br><span class="line">ps -e  和-A功能一样</span><br><span class="line">ps -H  显示树状结构，表示程序间的相互关系</span><br><span class="line">ps -f  全格式显示进程</span><br><span class="line"></span><br><span class="line">ps a   显示当前终端下执行的进程</span><br><span class="line">ps c   显示进程的真实名称</span><br><span class="line">ps e   列出程序所使用的环境变量</span><br><span class="line">ps f   用ASCII字符显示树状结构，表达程序间的相互关系</span><br><span class="line">ps x   显示所有进程，无论是否运行在终端上</span><br><span class="line">ps u   显示用户相关的进程或者与用户相关的属性</span><br><span class="line">ps r   只显示正在运行的进程</span><br><span class="line">这里，我们只简单列出了几个常用的命令，由于ps作为一个最古老的展示线程相关的命令，所拥有的参数特别多，并且加不加-也有很大的区别，所以接下来我们结合工作中常用的命令来学习它的参数。而我们也可以通过man ps来学习ps所有的命令：</span><br><span class="line"></span><br><span class="line">不加参数执行ps命令：展示当前终端中运行的进程情况，很少使用。</span><br><span class="line">[mrzhang@192 ~]$ ps</span><br><span class="line">  PID TTY          TIME CMD</span><br><span class="line"> 2648 pts/0    00:00:01 bash</span><br><span class="line"> 8669 pts/0    00:00:00 ps</span><br><span class="line">默认展示了4列信息：</span><br><span class="line"></span><br><span class="line">PID: 运行着的命令(CMD)的进程编号</span><br><span class="line">TTY: 命令所运行的位置（终端）</span><br><span class="line">TIME: 运行着的该命令所占用的CPU处理时间</span><br><span class="line">CMD: 该进程所运行的命令</span><br><span class="line">显示所有当前的进程：使用 -a 参数，-a 代表 all。同时加上x参数会显示没有控制终端的进程，x参数表示显示所有进程，无论是否运行在终端上。</span><br><span class="line">[mrzhang@192 ~]$ ps -ax</span><br><span class="line">该命令返回的结果会很长，为了方便查看，我们可以结合less命令和管道来使用：</span><br><span class="line"></span><br><span class="line">[mrzhang@192 ~]$ ps -ax | less</span><br><span class="line">根据用户过滤进程：在需要查看特定用户进程的情况下，我们可以使用 -u 参数。比如我们要查询某个用户下的进程：</span><br><span class="line">[mrzhang@192 ~]$ ps -u zhang</span><br><span class="line">通过CPU和内存使用来过滤进程：也许你想看下当前时间点那个进程占用的资源最多，这种情况下，我们可以通过使用-aux命令来显示全面的信息：</span><br><span class="line">[mrzhang@192 ~]$ ps -aux | less</span><br><span class="line">默认的结果是没有排序的，这时候可以通过--sort参数来排序：</span><br><span class="line"></span><br><span class="line">[mrzhang@192 ~]$ ps -aux --sort -%cpu | less</span><br><span class="line"></span><br><span class="line">USER       PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND</span><br><span class="line">mrzhang   2011  3.6  3.1 2368492 121944 ?      Sl   21:01   0:12 /usr/bin/gnome-shell</span><br><span class="line">mrzhang   2572  3.2  5.5 2146148 211300 ?      Sl   21:02   0:09 /usr/lib64/firefox/firefox</span><br><span class="line">root      1519  1.2  1.1 286208 45584 tty1     Ssl+ 21:01   0:04 /usr/bin/X :0 -background none -noreset -audit 4 </span><br><span class="line">看一下返回的几列信息：</span><br><span class="line"></span><br><span class="line">USER，用户名称；</span><br><span class="line">PID，进程号；</span><br><span class="line">%CPU，该进程所占用CPU百分比；</span><br><span class="line">%MEM，该进程所占用内存百分比；</span><br><span class="line">VSZ，进程所占用的虚拟内存大小；</span><br><span class="line">RSS，进程所占用的实际内存大小；</span><br><span class="line">TTY，该进程运行在哪个终端上面，若与终端无关，则显示 ?；</span><br><span class="line">STAT，进程状态；</span><br><span class="line">START，进程启动时间；</span><br><span class="line">TIME，进程实际占用CPU的时间；</span><br><span class="line">COMMAND，该进程对应的执行程序；</span><br><span class="line">  ps命令的排序格式是：--sort=[+|-] key，key表示某一列的名称，+表示升序排序，而-表示降序排序，比如按CPU降序排列：ps aux --sort=-%cpu，按照内存来进行降序排序：$ ps -aux --sort -%mem | less，我们还可以借助管道只显示前5条记录结果，也就是内存占有率最高的前5个进程：</span><br><span class="line"></span><br><span class="line">[mrzhang@192 ~]$ ps -aux --sort %mem | head -n 5</span><br><span class="line">而ps排序的方式还有另一种：ps+sort，通过设置sort的参数来进行排序，例如：</span><br><span class="line"></span><br><span class="line">[mrzhang@192 ~]$ ps -eo rss,args |  sort -k 1 -r -n | less</span><br><span class="line">该方式的一些参数如下：</span><br><span class="line"></span><br><span class="line">-f  忽略大小写的差异，例如 A 与 a 视为编码相同；</span><br><span class="line">-b  忽略最前面的空格符部分；</span><br><span class="line">-M  以月份的名字来排序，例如 JAN, DEC 等等的排序方法；</span><br><span class="line">-n  使用『纯数字』进行排序(默认是以文字型态来排序的)；</span><br><span class="line">-r  反向排序；</span><br><span class="line">-u  就是 uniq ，相同的数据中，仅出现一行代表；</span><br><span class="line">-t  分隔符，默认是用 [tab] 键来分隔；</span><br><span class="line">-k  以那个区间 (field) 来进行排序的意思</span><br><span class="line">这种方式就不多说了，感兴趣的可以参考：https://blog.csdn.net/lmy4710/article/details/8680763</span><br><span class="line"></span><br><span class="line">根据进程名和PID来过滤，通过使用-C参数，后面跟上进程名，比如像显示一个名称是getty的进程的信息，可以使用：</span><br><span class="line">[mrzhang@192 ~]$ ps -C bash</span><br><span class="line">  PID TTY          TIME CMD</span><br><span class="line"> 2686 pts/0    00:00:00 bash</span><br><span class="line">根据进程查看线程，如果我们像知道特定线程的进程，可以使用-L参数，后面加上对应的进程的PID：</span><br><span class="line">[mrzhang@192 ~]$ ps -L 2011</span><br><span class="line">  PID   LWP TTY      STAT   TIME COMMAND</span><br><span class="line"> 2011  2011 ?        Sl     0:25 /usr/bin/gnome-shell</span><br><span class="line"> 2011  2012 ?        Sl     0:00 /usr/bin/gnome-shell</span><br><span class="line"> 2011  2014 ?        Sl     0:00 /usr/bin/gnome-shell</span><br><span class="line"> 2011  2015 ?        Sl     0:00 /usr/bin/gnome-shell</span><br><span class="line"> 2011  2028 ?        Sl     0:00 /usr/bin/gnome-shell</span><br><span class="line"> 2011  2029 ?        Sl     0:00 /usr/bin/gnome-shell</span><br><span class="line">树形显示进程，可以通过参数f来实现：ps -axf，也可以使用pstree命令；</span><br><span class="line">[mrzhang@192 ~]$ ps -axf </span><br><span class="line"> 1773 ?        Sl     0:00  \_ gdm-session-worker [pam/gdm-password]</span><br><span class="line"> 1791 ?        Ssl    0:00      \_ /usr/libexec/gnome-session-binary --session g</span><br><span class="line"> 1965 ?        Ss     0:00          \_ /usr/bin/ssh-agent /bin/sh -c exec -l /bi</span><br><span class="line"> 2011 ?        Sl     0:29          \_ /usr/bin/gnome-shell</span><br><span class="line"> 2031 ?        Sl     0:00          |   \_ ibus-daemon --xim --panel disable</span><br><span class="line"> 2036 ?        Sl     0:00          |       \_ /usr/libexec/ibus-dconf</span><br><span class="line"> 2267 ?        Sl     0:00          |       \_ /usr/libexec/ibus-engine-simple</span><br><span class="line"> 2162 ?        Sl     0:03          \_ /usr/libexec/gnome-settings-daemon</span><br><span class="line">查看登入服务器的其他用户信息，可以使用：$ ps -eo pid,user,args，-e表示显示所有进程信息，o用于参数控制输出，pid,user,args是相应的用户的展示信息。</span><br><span class="line">使用ps命令来实时监控进程的状态，一般情况下ps命令的结果是静态的，也就是命令执行时的状态，不过我们可以通过watch命令和ps命令一起来实现。比如我们想通过CPU或者内存的使用率来筛选前10条进程，并且每1秒刷新一次：</span><br><span class="line">[mrzhang@192 ~]$ watch -n 1 &#x27;ps -aux --sort -%mem | head 10&#x27;</span><br><span class="line">Every 1.0s: ps -aux --sort -%mem | head -n 10</span><br><span class="line">USER       PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND</span><br><span class="line">mrzhang   2011  3.6  3.1 2368492 121944 ?      Sl   21:01   0:12 /usr/bin/gnome-shell</span><br><span class="line">mrzhang   2572  3.2  5.5 2146148 211300 ?      Sl   21:02   0:09 /usr/lib64/firefox/firefox</span><br><span class="line">root      1519  1.2  1.1 286208 45584 tty1     Ssl+ 21:01   0:04 /usr/bin/X :0 -background none -noreset -audit 4 </span><br><span class="line">...省略</span><br><span class="line">这里，我们可以充分利用ps命令的一些参数，实现自定义显示我们所需要的一些字段等，比如我们只想查看某一个用户的信息：</span><br><span class="line"></span><br><span class="line">[mrzhang@192 ~]$ watch -n 1 &#x27;ps  -U mrzhang u --sort -%mem | head 10&#x27;</span><br><span class="line">Every 1.0s: ps  -U mrzhang u --sort -%mem | head -n 10</span><br><span class="line">...</span><br><span class="line">我们还可以配合grep查找命令来进行查找一些特定的线程，比如我们要根据我们的服务名来查找对应的进程：</span><br><span class="line">[mrzhang@192 ~]$ ps -aux | grep 服务名</span><br><span class="line">把进程显示出来，并打印到相应文件中：</span><br><span class="line">[mrzhang@192 ~]$ ps -aux &gt; ps001.txt</span><br><span class="line">备注</span><br><span class="line">  ps的命令十分强大，参数也十分多，这里我们只了解了一些常用的操作所涉及到的命令，其实还有许多命令，我们可以通过man ps来了解并学习。</span><br><span class="line"></span><br><span class="line">本文参考自：10个重要的Linux ps命令实战</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ul>
<hr>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">56 篇文章22 订阅</span><br><span class="line">订阅专栏</span><br><span class="line">在linux下使用“ls -l”或者“ls -al”或者“ll”命令查看文件及目录详情时，shell中会显示出好几列的信息。平时也没怎么注意过，今天忽然心血来潮想了解一下，于是整理了这篇博客，以供参考：</span><br><span class="line"></span><br><span class="line">首先给出一张典型的显示结果：</span><br><span class="line"></span><br><span class="line">下面对其中的每一列进行详细的分析：</span><br><span class="line"></span><br><span class="line">一、文件类型</span><br><span class="line"></span><br><span class="line">表示该文件的类型：</span><br><span class="line"></span><br><span class="line">“-”表示普通文件；</span><br><span class="line">“d”表示目录；</span><br><span class="line">“l”表示链接文件；</span><br><span class="line">“p”表示管理文件；</span><br><span class="line">“b”表示块设备文件；</span><br><span class="line">“c”表示字符设备文件；</span><br><span class="line">“s”表示套接字文件；</span><br><span class="line">二、文件属性</span><br><span class="line"></span><br><span class="line">以back_init文件为例，其属性可分为三段：[rwx][rwx][r-x]，其中：</span><br><span class="line"></span><br><span class="line">第一段表示文件创建者/所有者对该文件所具有的权限，第二段表示创建者/所有者所在的组的其他用户所具有的权限，第三段表示其他组的其他用户所具有的权限。</span><br><span class="line"></span><br><span class="line">r（Read，读取权限）：对文件而言，具有读取文件内容的权限；对目录来说，具有浏览目录的权限。</span><br><span class="line">w（Write，写入权限）：对文件而言，具有新增、修改文件内容的权限；对目录来说，具有删除、移动目录内文件的权限。</span><br><span class="line">x（eXecute，执行权限）：对文件而言，具有执行文件的权限；对目录来说，该用户具有进入目录的权限。</span><br><span class="line">另外，这里还有2个很特殊的属性，平时不怎么常见，这里也顺带解释一下：</span><br><span class="line"></span><br><span class="line">s或S（SUID,Set UID）：可执行的文件搭配这个权限，便能得到特权，任意存取该文件的所有者能使用的全部系统资源。请注意具备SUID权限的文件，黑客经常利用这种权限，以SUID配上root帐号拥有者，无声无息地在系统中开扇后门，供日后进出使用。</span><br><span class="line">t或T（Sticky）：/tmp和 /var/tmp目录供所有用户暂时存取文件，亦即每位用户皆拥有完整的权限进入该目录，去浏览、删除和移动文件。</span><br><span class="line">综合起来可得，对于back_init文件，其创建者/所有者具有可读可写可执行的权限，其创建者/所有者所在的组的其他用户具有可读可写可执行的权限，其他组的其他用户则具有可读可执行但不可写的权限。</span><br><span class="line"></span><br><span class="line">三、目录/链接个数</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">对于目录文件，表示它的第一级子目录的个数。注意此处看到的值要减2才等于该目录下的子目录的实际个数。</span><br><span class="line"></span><br><span class="line">比如这里的include目录下，其实是没有子目录的，所以应该是0，但是它这里却显示2，这是因为要加上.目录和..目录。在linux下，.目录表示当前目录，..目录表示上一级目录。</span><br><span class="line"></span><br><span class="line">这也可以解释上图中第一行的.目录下的3和第二行..目录下的26。因为当前目录下有一个include目录，所以加上.目录和..目录这2个目录就等于3，所以第一行会显示3。而上一级目录共有24个目录，加上上一级目录的.目录和..目录这2个目录，所以这里的第二行显示的是26。</span><br><span class="line"></span><br><span class="line">对于其他文件，表示指向它的链接文件的个数。</span><br><span class="line"></span><br><span class="line">四、所有者及组</span><br><span class="line"></span><br><span class="line">表示该文件的所有者/创建者（owner）及其所在的组（group）。</span><br><span class="line"></span><br><span class="line">五、文件大小</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">如果是文件，则表示该文件的大小，单位为字节。</span><br><span class="line">如果是目录，则表示该目录符所占的大小，并不表示该目录下所有文件的大小。</span><br><span class="line"></span><br><span class="line">六、修改日期</span><br><span class="line"></span><br><span class="line">该文件最后修改的日期时间。</span><br><span class="line"></span><br><span class="line">七、文件名称</span><br><span class="line"></span><br><span class="line">文件名，无需多说。</span><br><span class="line"></span><br><span class="line">八、字体颜色</span><br><span class="line"></span><br><span class="line">在大多数的linux shell窗口中，还能用颜色来区分不同文件的属性：</span><br><span class="line"></span><br><span class="line">灰白色表示普通文件；</span><br><span class="line">亮绿色表示可执行文件；</span><br><span class="line">亮红色表示压缩文件；</span><br><span class="line">灰蓝色表示目录；</span><br><span class="line">亮蓝色表示链接文件；</span><br><span class="line">亮黄色表示设备文件；</span><br><span class="line">当然，这里需要使用系统缺省的配色方案。如果你自定义了shell的配色方案，则有可能与上面的定义不一致。</span><br><span class="line"></span><br><span class="line">最后还要说明一点的是，可以看到上述的图片中，back_init文件的后面还带了一个星号（*），这也是linux系统下用于标记可执行文件的另外一种方式。也就是说，凡是文件名后面带了一个星号（*）的，都是在说明这是一个可执行文件。</span><br><span class="line">————————————————</span><br><span class="line">版权声明：本文为CSDN博主「leon1741」的原创文章，遵循CC 4.0 BY-SA版权协议，转载请附上原文出处链接及本声明。</span><br><span class="line">原文链接：https://blog.csdn.net/LEON1741/article/details/82386520</span><br></pre></td></tr></table></figure>


<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">例子：修改参数 启用 syncookies 防止SYN攻击</span><br><span class="line">echo 1 &gt; /proc/sys/net/ipv4&gt;tcp_syncookies</span><br><span class="line">“echo &gt;”和“echo &gt;&gt;”的区别</span><br><span class="line">&gt; 输出重定向</span><br><span class="line"></span><br><span class="line">&gt;&gt; 输出追加重定向</span><br><span class="line"></span><br><span class="line">---------------------------------------------------------------------------------------------------------------------</span><br><span class="line"></span><br><span class="line">echo hello A</span><br><span class="line"></span><br><span class="line">将字符串hello A输出到屏幕</span><br><span class="line"></span><br><span class="line">---------------------------------------------------------------------------------------------------------------------</span><br><span class="line"></span><br><span class="line">echo hello A &gt; tmp.txt</span><br><span class="line"></span><br><span class="line">将字符串输出重定向，当前目录没有tmp.txt，则创建tmp.txt，并将字符串输出到tmp.txt文件中</span><br><span class="line"></span><br><span class="line">tmp.txt内容：hello A</span><br><span class="line"></span><br><span class="line">---------------------------------------------------------------------------------------------------------------------</span><br><span class="line"></span><br><span class="line">echo hello B &gt; tmp.txt</span><br><span class="line"></span><br><span class="line">将字符串输出重定向， 当前目录存在tmp.txt，则将tmp.txt内容替换成输出的字符串</span><br><span class="line"></span><br><span class="line">tmp.txt内容：hello B</span><br><span class="line"></span><br><span class="line">---------------------------------------------------------------------------------------------------------------------</span><br><span class="line"></span><br><span class="line">echo hello C &gt;&gt; tmp.txt</span><br><span class="line"></span><br><span class="line">将字符串输出追加重定向，当前目录存在tmp.txt，则将tmp.txt的内容后面追加输出的字符串</span><br><span class="line"></span><br><span class="line">tmp.txt内容：hello B hello C</span><br></pre></td></tr></table></figure>
    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/Linux/" rel="tag"># Linux</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2021/11/04/ReStart/" rel="prev" title="ReStart">
      <i class="fa fa-chevron-left"></i> ReStart
    </a></div>
      <div class="post-nav-item">
    <a href="/2021/11/05/Linux-%E6%96%87%E4%BB%B6IO/" rel="next" title="Linux I/O">
      Linux I/O <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Cstardust</p>
  <div class="site-description" itemprop="description">小窝</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">67</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">17</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">28</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Cstardust</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://mist.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Mist</a> 强力驱动
  </div>

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

</body>
</html>
